# 更新群體的範本

更新群體範本主要是用在Managed Instance Group上，由於Managed Instance Group裡面的執行個體都是由某個[執行個體範本](/執行個體範本)產生的，因此當我們程式、環境有更新時，就需要一併更新所有群組裡的執行個體。

> 如果是Unmanaged Instance Group，就無法一次更新所有個體，需要自己一個一個去更新。

1.要更新範本，最基本的就是需要【另外一個新的範本】，因此我們可以針對某個執行個體先進行更新的動作。

2.當某個執行個體已經更新完畢之後，針對該個體點選【編輯】，將【刪除執行個體時一併刪除開機磁碟】這個選項取消。

3.可以參考[執行個體範本](/執行個體範本)章節產生新的執行個體範本然後直接跳到第7點，或是往下看\(其實步驟差不多\)。

4.將該個體刪除。

> 執行個體如果沒有被刪除的話，是無法產生映像檔的。無法產生映像檔就無法製作新的範本。

5.前往【映像檔】，點選【建立映像檔】，在來源磁碟的地方，選擇剛剛被刪除的個體磁碟，用剛剛的個體產生一個新的映像檔。

> 建立映像檔時，可以選填【系列】，同個系列的映像檔可以被視為是版本上的控制。

6.建立完映像檔後，到【執行個體範本】，點選【建立執行個體範本】，選取剛剛建立的映像檔，建立新的範本。

7.回到【執行個體群體】區，點選要更新的Group，編輯。

8.在執行個體範本的地方選擇新的範本，按儲存後，之後產生的新VM個體都將會使用新的範本產生。

> 但是正在執行的舊VM個體並不會更新，因此我們可以直接把舊的刪除，讓系統自己產生新的VM，或是執行Google提供的gloud指令，直接在web的終端機上執行命令。
>
> 效果好像差不多。
>
> 不管是哪種方式，系統建立新的VM時都會需要一點時間，因此更新的頻次、更新的時間點，都需要考慮進去。



